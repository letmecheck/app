// Replaces the board with a brand-spanking-new board.
<% @game = @piece.game %>
$( ".board-booyah-box" ).html("<%= escape_javascript(render('games/chess_board')) %>");

// The following calls the function within master.js to make 
// pieces draggable and squares droppable.
dragDrop();

<% if @game.in_check?('black') %>
  $( ".warning" ).html( "Hello, black is in check!" )
                 .addClass( "kingInCheckMessage", 1000 )
                 .addClass( "animated bounceInUp" )
                 .animate( { letterSpacing: ".3em" }, 1200 );
 
  $("#black-king").addClass( "animated bounce" );

<% elsif @game.in_check?('white') %>
  $( ".warning" ).html( "Hello, white is in check!" )
                 .addClass( "kingInCheckMessage", 1000 )
                 .addClass( "animated bounceInUp" )
                 .animate( { letterSpacing: ".3em" }, 1200 );

  $("#white-king").addClass( "animated bounce" );
<% end %>

// The _chess_board partial has a div with the class .warning 
// .warning may be used in the future to show a message for checkmate
// much in the same way as above with .addClass
